"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[291],{9291:function(e,n,t){t.r(n),t.d(n,{PrinterViewerWrapper:function(){return d},default:function(){return a}});var r=t(2495),l=t(1474),i=t(4451),s=t(2031);function o(e){let{specs:n,calibration:t}=e,o=(0,l.useRef)(null),d=(0,l.useRef)(null),a=(0,l.useRef)(null),u=(0,l.useMemo)(()=>{let e=new i.xsS;e.background=new i.Ilk(724500);let t=new i.cPb(50,1,.1,2e3);t.position.set(0,n.enclosureCm.h,1.5*n.enclosureCm.d),t.lookAt(0,0,0);let r=new i.Ox3(16777215,1);r.position.set(50,100,50),e.add(r);let l=new i.Mig(16777215,.4);return e.add(l),{scene:e,camera:t}},[n]);return(0,l.useEffect)(()=>{if(!o.current)return;let e=o.current,n=new s.CP7({antialias:!0});n.setPixelRatio(window.devicePixelRatio),n.setSize(e.clientWidth,e.clientHeight),e.appendChild(n.domElement),d.current=n;let t=new ResizeObserver(()=>{let{clientWidth:t,clientHeight:r}=e;n.setSize(t,r)});t.observe(e);let r=()=>{d.current&&(d.current.render(u.scene,u.camera),a.current=requestAnimationFrame(r))};return r(),()=>{a.current&&cancelAnimationFrame(a.current),t.disconnect(),n.dispose(),e.removeChild(n.domElement)}},[u]),(0,l.useEffect)(()=>{var e;if(!d.current)return;let{scene:r}=u;for(;r.children.length>0;){let e=r.children.pop();e.dispose&&e.dispose()}let l=new i.Ox3(16777215,1);l.position.set(50,100,50),r.add(l);let s=new i.Mig(16777215,.4);r.add(s),r.add(new i.y8_(50));let o=n.enclosureCm.w,a=n.enclosureCm.h,c=n.enclosureCm.d,m=new i.DvJ(o,a,c),w=new i.vBJ({color:3835647,wireframe:!0}),f=new i.Kj0(m,w);f.position.set(0,a/2,0),r.add(f);let p=n.basePlateMm.w/10,h=n.basePlateMm.d/10,C=new i.DvJ(p,1,h),x=new i.Wid({color:7835049,metalness:.8,roughness:.2}),v=new i.Kj0(C,x);v.position.set(0,.5,0),r.add(v);let b=new i.nls({color:16711731});for(let n of null!==(e=null==t?void 0:t.downwardArray)&&void 0!==e?e:Array.from({length:8},(e,n)=>{let t=p/7*n-p/2;return{index:n,xCm:t,yCm:a,zCm:0}})){let e=[];e.push(new i.Pa4(n.xCm-p/2,n.yCm,n.zCm)),e.push(new i.Pa4(n.xCm-p/2,0,n.zCm));let t=new i.u9r().setFromPoints(e),l=new i.x12(t,b);r.add(l)}let g=new i.ZAu,[P,j,k]=[9,9,9],M=n.roofSphere.singleEmitterSizeCm,y=Math.min(o/P,c/k),z=new i.xo$(Math.max(.05,.05*Math.min(M.w,M.h,M.d))),E=new i.vBJ({color:16765286});for(let e=0;e<P;e++)for(let n=0;n<k;n++){let t=new i.Kj0(z,E);t.position.set(-o/2+e*y,a,-c/2+n*y),g.add(t)}r.add(g)},[n,t,u]),(0,r.jsx)("div",{ref:o,className:"h-[420px] w-full rounded-md border"})}function d(e){let{bot:n,calibration:t,onSave:l,onCalibrate:i}=e;return(0,r.jsxs)("div",{children:[(0,r.jsxs)("div",{style:{marginBottom:8},children:[(0,r.jsx)("button",{onClick:()=>l(n.specs),children:"Save Specs"}),(0,r.jsx)("button",{style:{marginLeft:8},onClick:()=>i(),children:"Calibrate"})]}),(0,r.jsx)(o,{specs:n.specs.printer,calibration:t})]})}var a=d}}]);