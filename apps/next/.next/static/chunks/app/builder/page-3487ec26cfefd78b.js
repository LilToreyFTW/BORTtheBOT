(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[461],{2651:function(e,t,n){Promise.resolve().then(n.bind(n,5175))},5175:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return x},dynamic:function(){return m}});var i,r=n(2495),a=n(8082),l=n(8984),s=n(265),o=n(5545),c=n(655),d=n(1474),u=n(4661),p=n(8389);let m="force-dynamic",h=(0,u.default)(()=>Promise.all([n.e(767),n.e(405),n.e(291)]).then(n.bind(n,9291)).then(e=>e.PrinterViewerWrapper),{loadableGenerated:{webpack:()=>[9291]},ssr:!1}),f=(0,u.default)(()=>Promise.all([n.e(767),n.e(405),n.e(457)]).then(n.bind(n,4457)).then(e=>e.RobotSimWrapper),{loadableGenerated:{webpack:()=>[4457]},ssr:!1}),y=(0,c.BJ)({links:[(0,c.N8)({url:"".concat(null!==(i=p.env.NEXT_PUBLIC_SERVER_URL)&&void 0!==i?i:"http://localhost:3000","/trpc"),fetch:(e,t)=>fetch(e,{...t,credentials:"include"})})]});function v(e){return(0,l.D)({mutationFn:t=>y.mutation(e,t)})}function b(){var e,t,n;let i=(t="bots.list",(0,a.a)({queryKey:["trpc",t,void 0],queryFn:()=>y.query(t,n)})),l=v("bots.create"),s=v("bots.remove"),o=v("bots.updateSpecs"),c=v("bots.calibratePrinter"),u=(0,d.useRef)(null),p=(0,d.useRef)(null),m=async()=>{var e,t,n,r;let a=(null===(t=u.current)||void 0===t?void 0:null===(e=t.value)||void 0===e?void 0:e.trim())||"",s=(null===(r=p.current)||void 0===r?void 0:null===(n=r.value)||void 0===n?void 0:n.trim())||void 0;if(!a)return;let o=crypto.randomUUID();await l.mutateAsync({id:o,name:a,description:s}),u.current&&(u.current.value=""),p.current&&(p.current.value=""),await i.refetch()},b=async e=>{await s.mutateAsync({id:e}),await i.refetch()};return(0,r.jsxs)("main",{style:{padding:16},children:[(0,r.jsx)("h1",{style:{fontSize:18,marginBottom:12},children:"BORT Command Center (Next)"}),(0,r.jsxs)("section",{style:{marginBottom:12},children:[(0,r.jsx)("input",{ref:u,placeholder:"Bot name",style:{marginRight:8}}),(0,r.jsx)("input",{ref:p,placeholder:"Description",style:{marginRight:8}}),(0,r.jsx)("button",{onClick:m,children:"Create"})]}),(0,r.jsx)("section",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(360px, 1fr))",gap:12},children:null===(e=i.data)||void 0===e?void 0:e.map(e=>(0,r.jsxs)("div",{style:{border:"1px solid #333",borderRadius:6,padding:8},children:[(0,r.jsxs)("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{style:{fontWeight:600},children:e.name}),(0,r.jsx)("div",{style:{fontSize:12,opacity:.7},children:e.description})]}),(0,r.jsx)("button",{onClick:()=>b(e.id),style:{color:"#ff5252"},children:"Delete"})]}),(0,r.jsx)("div",{style:{marginTop:8},children:(0,r.jsx)(h,{bot:e,onSave:async t=>{await o.mutateAsync({id:e.id,specs:t}),await i.refetch()},onCalibrate:async()=>c.mutateAsync({id:e.id}),calibration:c.data})}),(0,r.jsx)("div",{style:{marginTop:8},children:(0,r.jsx)(f,{plateW:e.specs.printer.basePlateMm.w/10,plateD:e.specs.printer.basePlateMm.d/10,height:e.specs.printer.enclosureCm.h,botName:e.name})})]},e.id))})]})}function x(){let e=new s.S;return(0,r.jsx)(o.aH,{client:e,children:(0,r.jsx)(b,{})})}}},function(e){e.O(0,[858,198,75,744],function(){return e(e.s=2651)}),_N_E=e.O()}]);